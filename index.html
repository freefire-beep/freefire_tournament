<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° - ‡¶ü‡ßÅ‡¶∞‡ßç‡¶®‡¶æ‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡ßã</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #00d2ff;
            --secondary-color: #3a7bd5;
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-color: #f8fafc;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Hind Siliguri', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            direction: ltr;
        }

        /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .user-info h2 { margin: 0; font-size: 1.2rem; }
        .balance-box {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .container { padding: 20px; }
        .package-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: 0.3s;
        }

        .package-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .status-badge {
            background: #22c55e;
            padding: 2px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
        }

        .timer {
            color: #fbbf24;
            font-weight: bold;
            font-size: 0.9rem;
            margin: 10px 0;
        }

        .details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        .join-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Hind Siliguri';
        }

        .join-btn:disabled { background: #64748b; cursor: not-allowed; }

        /* ‡¶¨‡¶ü‡¶Æ ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: var(--card-bg);
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>

    <header>
        <div class="user-info">
            <h2 id="display-name">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h2>
            <small>‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</small>
        </div>
        <div class="balance-box">
            ü™ô <span id="user-coins">0</span>
        </div>
    </header>

    <div class="container" id="package-list">
        <p style="text-align: center;">‡¶ü‡ßÅ‡¶∞‡ßç‡¶®‡¶æ‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ñ‡ßã‡¶Å‡¶ú‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
    </div>

    <div style="height: 80px;"></div> <nav class="bottom-nav">
        <span>üè† ‡¶π‡ßã‡¶Æ</span>
        <span onclick="location.href='zstore.html'">üõí ‡¶∏‡ßç‡¶ü‡ßã‡¶∞</span>
        <span onclick="location.href='zinbox.html'">üîî ‡¶á‡¶®‡¶¨‡¶ï‡ßç‡¶∏</span>
        <span onclick="location.href='zaccount.html'">üë§ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
    </nav>

    <script src="config.js"></script>
    <script>
        // ‡¶°‡¶æ‡¶Æ‡¶ø ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶¨‡¶Ç ‡¶™‡¶∞‡ßá ‡¶è‡¶™‡¶ø‡¶Ü‡¶á ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
        async function fetchPackages() {
            try {
                const response = await fetch(`${CONFIG.API_URL}?action=getPackages`);
                const data = await response.json();
                renderPackages(data);
            } catch (error) {
                console.error("‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ:", error);
                document.getElementById('package-list').innerHTML = "‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§";
            }
        }

        function renderPackages(packages) {
            const listContainer = document.getElementById('package-list');
            listContainer.innerHTML = '';

            packages.forEach(pkg => {
                const card = document.createElement('div');
                card.className = 'package-card';
                card.innerHTML = `
                    <div class="package-header">
                        <h3>${pkg.title}</h3>
                        <span class="status-badge">${pkg.status}</span>
                    </div>
                    <div class="timer" id="timer-${pkg.package_id}">‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
                    <div class="details">
                        <div>Entry: ü™ô ${pkg.entry_fee}</div>
                        <div>Prize: üí∞ ${pkg.prize_pool}</div>
                        <div>Slots: ${pkg.joined_count}/${pkg.total_slots}</div>
                    </div>
                    <button class="join-btn" onclick="joinMatch('${pkg.package_id}')" 
                        ${pkg.status !== 'Open' ? 'disabled' : ''}>
                        ${pkg.status === 'Open' ? '‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®' : '‡¶¨‡¶®‡ßç‡¶ß ‡¶Ü‡¶õ‡ßá'}
                    </button>
                `;
                listContainer.appendChild(card);
                startTimer(pkg.start_time, `timer-${pkg.package_id}`);
            });
        }

        function startTimer(startTime, elementId) {
            const target = new Date(startTime).getTime();
            
            const interval = setInterval(() => {
                const now = new Date().getTime();
                const distance = target - now;

                if (distance < 0) {
                    clearInterval(interval);
                    document.getElementById(elementId).innerHTML = "‡¶ü‡ßÅ‡¶∞‡ßç‡¶®‡¶æ‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶õ‡ßá!";
                    return;
                }

                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById(elementId).innerHTML = 
                    `‡¶∏‡¶Æ‡ßü ‡¶¨‡¶æ‡¶ï‡¶ø: ${hours}‡¶ò‡¶£‡ßç‡¶ü‡¶æ ${minutes}‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ${seconds}‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°`;
            }, 1000);
        }

        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶¨‡ßá
        window.onload = () => {
            fetchPackages();
            // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶Ü‡¶∏‡¶¨‡ßá (zsync.js ‡¶•‡ßá‡¶ï‡ßá)
        };
    </script>
</body>
  </html>
  
